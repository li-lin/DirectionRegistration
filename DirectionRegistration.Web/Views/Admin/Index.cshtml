@using DirectionRegistration.Models
@using PagedList.Mvc;
@model PagedList.IPagedList<RegistrationViewModel>
@{
    ViewBag.Title = "管理面板";
}

<div class="page-header">
    <h3>管理面板 - [@Session["admin"].ToString()]</h3>
</div>

<div class="btn-group btn-group-lg" role="group">
    @Html.ActionLink("导入", "UploadData", null, new { id = "btn-import", @class = "btn btn-success", data_remote = "false", data_toggle = "modal", data_target = "#myModal" })
    @Html.ActionLink("导出", "DownloadData", null, new { id="btn-export", @class = "btn btn-success" })
    @Html.ActionLink("设置", "Setting", null, new { id = "btn-setting", @class = "btn btn-success", data_remote = "false", data_toggle = "modal", data_target = "#myModal" })
</div>
<div style="height:10px;clear:both;"></div>
<table class="table table-striped">
    <thead>
        <tr>
            <th>学号</th>
            <th>姓名</th>
            <th>专业</th>
            <th>第一志愿</th>
            <th>第二志愿</th>
            <th>第三志愿</th>
            <th>第四志愿</th>
            <th>第五志愿</th>
            <th>操作</th>
        </tr>
    </thead>
    <tbody id="tableBody">
        @foreach (var item in Model)
        {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.Number)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Name)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Major)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.FirstSelection)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.SecondSelection)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.ThirdSelection)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.SecondSelection)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.ThirdSelection)
            </td>
            <td>
                <div class="btn-toolbar" role="toolbar">
                    <div class="btn-group btn-group-sm" role="group">
                        @Html.ActionLink("详情", "Detail", new { id = item.Id }, new { @class = "btn btn-default" })
                    </div>
                </div>
            </td>
        </tr>
        }
    </tbody>
</table>
<div>
    第@(Model.PageCount < Model.PageNumber ? 0 : Model.PageNumber)页-共 @Model.PageCount 页
    @Html.PagedListPager(Model,
    page => Url.Action("Index", "Admin",
        new
        {
            page = page
        }))
</div>


@section scripts{
<script src="~/Scripts/jquery.form.js"></script>
<script>
    $(document).ready(function () {
        $('#btn-import').click(function () {
            handleModal({
                title: '导入学生数据',
                url: '@Url.Action("UploadData")'
            });
        });
        $('#btn-setting').click(function () {
            handleModal({
                title: '参数设置',
                url: '@Url.Action("Setting","Admin")'
            });
        });

    });
</script>
}
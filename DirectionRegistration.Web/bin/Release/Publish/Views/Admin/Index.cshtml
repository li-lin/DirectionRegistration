@using DirectionRegistration.Models
@using PagedList.Mvc;
@model PagedList.IPagedList<RegistrationViewModel>
@{
    ViewBag.Title = "管理面板";
}

<div class="page-header">
    <h3>管理面板 - [@ViewBag.TeacherInfo]<span class="label label-primary pull-right">已填报[<span style="color:brown">@ViewBag.DirName</span>]方向 @ViewBag.Now 人，共 @ViewBag.All 人</span></h3>
</div>

<table class="table table-striped">
    <thead>
        <tr>
            <th>学号</th>
            <th>姓名</th>
            <th>性别</th>
            <th>专业</th>
            <th>第1志愿</th>
            <th>第2志愿</th>
            <th>第3志愿</th>
            <th>第4志愿</th>
            <th>第5志愿</th>
            <th>操作</th>
        </tr>
    </thead>
    <tbody id="tableBody">
        @foreach (var item in Model)
        {
            <tr>
                <td>
                    @item.Number
                </td>
                <td>
                    @item.Name
                </td>
                <td>
                    @item.Gender
                </td>
                <td>
                    @item.Major
                </td>
                @foreach (var dir in item.Selections)
                {
                    <td>
                        @dir.DirectionName
                    </td>
                }
                <td>
                    <button onclick="showDetail('@item.Id')" class="btn btn-default" data-toggle="modal" data-target="#myModal">详情</button>
                </td>
            </tr>
        }
    </tbody>
</table>
<div>
    第@(Model.PageCount < Model.PageNumber ? 0 : Model.PageNumber)页-共 @Model.PageCount 页
    @Html.PagedListPager(Model,
    page => Url.Action("Index", "Admin",
        new
        {
            page = page
        }))
</div>


@section scripts{
    <script>
        function showDetail(id) {
            handleModal({
                title: '填报详情',
                url: '@Url.Action("Details","Admin")' + '/' + id
            });
        }

    </script>
}